---
import Tag from './Tag.astro';

interface Props {
  title: string;
  description: string;
  date: string;
  readTime: string;
  image?: string;
  tags: string[];
  slug?: string;
  category?: string;
  class?: string;
}

const {
  title,
  description,
  date,
  readTime,
  image,
  tags,
  slug,
  category,
  class: className = '',
} = Astro.props;

const href = slug ? `/blog/${slug}` : undefined;
const CardWrapper = href ? 'a' : 'article';
---

<CardWrapper
  class:list={['article-card', className]}
  href={href}
  data-category={category}
>
  <div class="article-card__image">
    {image ? (
      <img src={image} alt={title} loading="lazy" />
    ) : (
      <div class="article-card__image-placeholder"></div>
    )}
  </div>

  <div class="article-card__content">
    <div class="article-card__meta">
      <span class="article-card__date">{date}</span>
      <span class="article-card__dot">•</span>
      <span class="article-card__read-time">{readTime}</span>
    </div>

    <h3 class="article-card__title">{title}</h3>
    <p class="article-card__description">{description}</p>

    <div class="article-card__footer">
      <div class="article-card__tags">
        {tags.map((tag) => (
          <Tag variant="accent" size="sm">{tag}</Tag>
        ))}
      </div>
      {slug && (
        <span class="article-card__link">
          Read article →
        </span>
      )}
    </div>
  </div>
</CardWrapper>

<style>
  .article-card {
    display: flex;
    flex-direction: column;
    background-color: var(--color-surface);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: var(--transition-base);
    text-decoration: none;
  }

  a.article-card:hover {
    transform: translateY(-4px);
  }

  .article-card__image {
    width: 100%;
    height: 180px;
    overflow: hidden;
  }

  .article-card__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .article-card__image-placeholder {
    width: 100%;
    height: 100%;
    background-color: var(--color-bg-secondary);
  }

  .article-card__content {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    padding: var(--space-6);
  }

  .article-card__meta {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }

  .article-card__date,
  .article-card__read-time {
    font-family: var(--font-mono);
    font-size: 12px;
    font-weight: var(--font-medium);
    color: var(--color-text-disabled);
  }

  .article-card__dot {
    font-family: var(--font-mono);
    font-size: 12px;
    color: var(--color-text-disabled);
    opacity: 0.5;
  }

  .article-card__title {
    font-family: var(--font-sans);
    font-size: 20px;
    font-weight: var(--font-semibold);
    color: var(--color-text-primary);
    line-height: 1.4;
  }

  .article-card__description {
    font-family: var(--font-sans);
    font-size: var(--text-sm);
    font-weight: var(--font-normal);
    color: var(--color-text-muted);
    line-height: 1.5;
  }

  .article-card__footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-3);
    margin-top: var(--space-1);
  }

  .article-card__tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
  }

  .article-card__link {
    font-family: var(--font-mono);
    font-size: 13px;
    font-weight: var(--font-medium);
    color: var(--color-text-secondary);
    white-space: nowrap;
    transition: var(--transition-fast);
  }

  a.article-card:hover .article-card__link {
    color: var(--color-primary);
  }

  @media (max-width: 768px) {
    a.article-card:hover {
      transform: none;
    }

    .article-card__image {
      height: 140px;
    }

    .article-card__content {
      padding: var(--space-4);
      gap: 10px;
    }

    .article-card__title {
      font-size: 16px;
    }

    .article-card__description {
      font-size: 13px;
    }

    .article-card__footer {
      display: none;
    }
  }
</style>
